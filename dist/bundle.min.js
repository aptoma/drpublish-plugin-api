!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports.PluginAPI=t():e.PluginAPI=t()}(window,function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){var n,r,i;r=[e,o(1),o(2),o(3)],void 0===(i="function"===typeof(n=function(e,t,o,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,u=((i=function(){this.DEBUG=!1,this.Version="1.0",this.Editor=null,this.Article=null,this.errorListeners=new n,this.eventListeners=new n,this.appName="",this.selectedPluginElement=null;var e=this;pm.bind("event",function(t){var o=function(e){return function(t){u.request(e,t)}};return t.data=function e(t){for(var n in t)t.hasOwnProperty(n)&&("object"===r(t[n])&&null!==t[n]&&"function"===t[n].type?t[n]=o(t[n].eventKey):"object"===r(t[n])&&null!==t[n]&&"function"===typeof t[n].map?t[n]=t[n].map(e):"object"===r(t[n])&&null!==t[n]&&(t[n]=e(t[n])));return t}(t.data),"undefined"===typeof(t=e.eventListeners.notify(t.type,t.data))||(!1===t?{abort:!0}:t)},"*")}).prototype.request=function(e,t,o){var n=this;this.DEBUG&&console.info(this.getAppName()+": Requesting "+e+" from parent with data",t),t||(t={}),"undefined"===typeof o&&(o=null),"number"===typeof t.length&&(t={data:t}),t.src_app=this.getAppName();var i=function(e,t){var o=Math.floor(1e3*Math.random()),r=e+o+"functioncallback"+(new Date).getTime(),i=function(e,t){return function(){return n.eventListeners.remove(t,t),e.apply(null,arguments)}}(t,r);return n.eventListeners.add(r,i),{type:"function",eventKey:r}};t=function e(t){for(var o in t)if(t.hasOwnProperty(o)){var n=t[o];"function"===typeof n?t[o]=i(o,n):"object"===r(n)&&null!==n&&"function"===typeof n.map?t[o]=n.map(e):"object"===r(n)&&null!==n&&(t[o]=e(n))}return t}(t),pm({target:parent,type:e,data:t,success:o,error:function(e){n.errorListeners.notify(e.type,e)},origin:"*",hash:!1})},i.prototype.openTagCreationDialog=function(e,t){this.request("create-tag",{tag:e},t)},i.prototype.reloadIframe=function(){this.request("app-reload",{app:this.getAppName()})},i.prototype.getAppName=function(){return this.appName},i.prototype.setAppName=function(e){this.appName=e},i.prototype.showInfoMsg=function(e){this.request("show-message-info",{message:e})},i.prototype.showWarningMsg=function(e){this.request("show-message-warning",{message:e})},i.prototype.showErrorMsg=function(e){this.request("show-message-error",{message:e})},i.prototype.showLoader=function(e){this.request("show-loader",{message:e})},i.prototype.hideLoader=function(){this.request("hide-loader")},i.prototype.addListeners=function(e){var t=function(e){return function(t){e(t.data)}};for(var o in e)if(e.hasOwnProperty(o)){var n=e[o],r=t(n);this.on(o,r)}},i.prototype.__loadArticleRevision=function(e,t){this.request("load-revision",{revision:e},t)},i.prototype.createTag=function(e,t){this.request("tag-create",{tag:e},t)},i.prototype.searchDrLib=function(e,t){this.request("drlib-search",{query:e.query,access:e.access,secure:e.secure,success:e.success,error:e.error},t)},i.prototype.convertDomToHTML=function(e){if("object"===r(e)&&"function"===typeof e.wrap)return e.wrap("<div>").parent().html();var t=e.cloneNode(!0),o=document.createElement("div");return o.appendChild(t),o.innerHTML},i.prototype.generateArticleUrl=function(e,t){this.request("generate-article-url",{id:e},t)},i.prototype.extendApi=function(e,t,o){var n=this;this.request("extend-api",{group:e,name:t,action:function(e){var t=o(e.data);n.request(e.eventKey,{data:t})}})},i.prototype.callExtendedApi=function(e,t,o,n){this.request("call-extended-api",{group:e,name:t,data:o,callback:n})},i.prototype.getCurrentUser=function(e){this.request("get-current-user",null,e)},i.prototype.getConfiguration=function(e){this.request("get-configuration",null,e)},i.prototype.getDrPublishConfiguration=function(e){this.request("get-drpublish-configuration",null,e)},i.prototype.setConfiguration=function(e,t,o){"boolean"===typeof t?t={onlyPublication:t}:"object"===r(t)&&null!==t||(t={});var n={config:e,onlyPublication:"boolean"===typeof t.onlyPublication&&t.onlyPublication,success:"function"===typeof t.success?t.success:null,error:"function"===typeof t.error?t.error:null};this.request("set-configuration",n,o)},i.prototype.emit=function(e,t){this.request("emit-api-event",{name:e,data:t})},i.prototype.on=function(e,t){this.eventListeners.add(e,t),this.request("on-api-event",{name:e})},i.prototype.increaseRequiredActionCounter=function(e){this.request("increase-required-action-counter",{},e)},i.prototype.decreaseRequiredActionCounter=function(e){this.request("decrease-required-action-counter",{},e)},i.prototype.clearRequiredActionCounter=function(e){this.request("clear-required-action-counter",{},e)},i.prototype.setRequiredActionCounter=function(e,t){this.request("set-required-action-counter",{count:e},t)},i.prototype.create=function(){return new i},i.prototype.createEmbeddedObject=function(e,t){this.request("create-embedded-object",{typeId:e,callback:t})},i.prototype.getEmbeddedObjectTypes=function(e){this.request("get-embedded-object-types",null,e)},i.prototype.giveFocus=function(e,t,o){return"string"===typeof e&&""!==e&&("boolean"!==typeof o&&(o=!0),this.request("give-focus",{pluginName:e,start:o,argument:t}),!0)},i.prototype.hide=function(){return this.request("hide"),!0},i.prototype.createModal=function(e,t){return this.request("create-custom-modal",{content:e,options:t}),!0},i.prototype.updateModal=function(e){return this.request("update-custom-modal",{content:e}),!0},i.prototype.closeModal=function(e){return this.request("close-custom-modal",{destroy:e}),!0},i.prototype.getModalInputs=function(e){this.request("get-custom-modal-inputs",null,e)},i.prototype.confirmAuthenticated=function(){this.request("confirm-authenticated",{pluginName:this.appName})},new i);u.Article=o(u),u.Editor=t(u),e.exports=u})?n.apply(t,r):n)||(e.exports=i)},function(e,t,o){var n,r,i;r=[e],void 0===(i="function"===typeof(n=function(e){"use strict";function t(e){return(t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var o=null,n=function(){this.DEBUG=!1,e.on("pluginElementClicked",function(e){o=e}),e.on("pluginElementDeselected",function(){o=null})};return n.prototype.getActiveEditor=function(t){e.request("get-active-editor",null,t)},n.prototype.registerMenuAction=function(t,o){e.request("register-menu-action",t,o)},n.prototype.registerHoverAction=function(t,o){e.request("register-hover-action",t,o)},n.prototype.directionalCastle=function(t,o){e.request("editor-directional-castle",t,o)},n.prototype.registerMenuActionGroup=function(t,o){e.request("register-menu-action-group",t,o)},n.prototype.getEditorType=function(t){e.request("editor-get-type",null,t)},n.prototype.replaceElementById=function(t,o,n){e.request("editor-element-replace-byid",{id:t,element:o},n)},n.prototype.replacePluginElementById=function(t,o,n){e.request("editor-element-replace-plugin-element-byid",{id:t,element:o},n)},n.prototype.deleteElementById=function(t,o){e.request("editor-element-replace-byid",{id:t},o)},n.prototype.getHTMLById=function(t,o){e.request("editor-element-get-byid",{id:t},o)},n.prototype.getHTMLBySelector=function(t,o){e.request("editor-elements-get-byselector",{selector:t},o)},n.prototype.getCategories=function(t){e.request("get-categories",null,t)},n.prototype.getParentCategories=function(t,o){e.request("get-parent-categories",t,o)},n.prototype.getParentIds=function(t,o,n){e.request("get-parent-ids",{id:t,selector:o},n)},n.prototype.getTagTypes=function(t){e.request("get-tag-types",null,t)},n.prototype.getTagType=function(t,o){e.request("get-tag-type",{id:t},o)},n.prototype.clear=function(t){e.request("editor-clear",null,t)},n.prototype.insertString=function(t,o){e.request("editor-insert-string",{string:t},o)},n.prototype.insertElement=function(o,n,r){var i=!1;"object"===t(n)?i="boolean"===typeof(n=n||{}).select&&n.select:"undefined"===typeof r&&"function"===typeof n&&(r=n),e.request("editor-insert-element",{element:o.outerHTML,select:i},r)},n.prototype.removeClasses=function(t,o,n){e.request("editor-classes-remove",{id:t,classes:o},n)},n.prototype.addClasses=function(t,o,n){e.request("editor-classes-add",{id:t,classes:o},n)},n.prototype.markAsActive=function(t,o){e.request("editor-mark-as-active",{id:t},o)},n.prototype.setAttributeById=function(t,o,n,r){e.request("editor-element-attribute-set-byid",{id:t,attribute:o,value:n},r)},n.prototype.setStyleById=function(t,o,n,r){e.request("editor-element-style-set-byid",{id:t,attribute:o,value:n},r)},n.prototype.initMenu=function(t,o){e.request("editor-initialize-menu",{menus:t},o)},n.prototype.openPluginElementEditor=function(t){e.request("open-element-editor",{id:t})},n.prototype.getTotalWordCount=function(t){e.request("total-word-count",null,t)},n.prototype.getTotalCharCount=function(t){e.request("total-char-count",null,t)},n.prototype.updateAssetOption=function(t,o,n,r){e.request("update-asset-option",{dpArticleId:t,key:o,value:n},r)},n.prototype.updateAssetData=function(t,o){e.request("update-asset-media",t,o)},n.prototype.getAssetData=function(t,o){e.request("get-asset-data",{data:t},o)},n.prototype.insertNestedAsset=function(t,o,n,r){var i=this;function u(t){e.request("update-embedded-asset",n,t)}e.createEmbeddedObject(n.embeddedTypeId,function(s){!function(t,r,u){n.internalId=t;var s="asset-"+t,a=$("<div />");a.attr("id",s),a.attr("data-internal-id",t),a.attr("data-ah5-type",n.assetSource),n.externalId&&a.attr("data-external-id",n.externalId),n.assetClass&&a.addClass(n.assetClass),a.addClass("dp-plugin-element"),a.html(o),e.Editor.getHTMLById(r,function(e){var t=document.createElement("div");t.innerHTML=e,t.firstChild.setAttribute("id",r+"tmp"),i.replacePluginElementById(r,t.innerHTML,function(){(t=document.createElement("div")).innerHTML=e;var o=t.querySelector(".dp-fact-box-image, .dp-nested-asset-container");n.isMultiple?$(o).append(a.get(0).outerHTML):o.innerHTML=a.get(0).outerHTML,i.replacePluginElementById(r+"tmp",t.innerHTML,u)})})}(s,t,function(e){return u(r)})})},n.prototype.insertEmbeddedAsset=function(t,n,r){var i=this,u=!1;if(o){if(n.assetSource!==e.getAppName())return void e.showErrorMsg("Can't update selected plugin element since it doesn't belong to the '"+e.getAppName()+"' plugin");u=!0}if(o){var s=o.dpArticleId;if(!s)throw Error("Selected plugin element: expected dpArticleId not found (tried reading from attribute 'data-internal-id')");a(s,function(e){return c("function"===typeof r?r(e):null)})}else e.createEmbeddedObject(n.embeddedTypeId,function(e){a(e,function(e){return p("function"===typeof r?r(e):null)})});function a(e,o){n.internalId=e;var r="asset-"+e,s=document.createElement("div");if(s.id=r,s.dataset.internalId=e,n.externalId&&(s.dataset.externalId=n.externalId),n.assetClass&&s.classList.add(n.assetClass),s.innerHTML=t,u?i.replaceElementById(r,s.outerHTML,null):i.insertElement(s,{select:!0}),"function"===typeof o)return o()}function p(t){e.request("add-embedded-asset",n,t)}function c(t){e.request("update-embedded-asset",n,t)}},n.prototype.getSelectedPluginElement=function(t){e.request("get-selected-plugin-element",{},t)},new n}})?n.apply(t,r):n)||(e.exports=i)},function(e,t,o){var n,r,i;r=[e],void 0===(i="function"===typeof(n=function(e){"use strict";e.exports=function(e){var t=function(){this.DEBUG=!1};return t.prototype.focusApp=function(t){e.request("app-focus",{},t)},t.prototype.startApp=function(t,o,n){e.request("app-start",{app:t,option:o},n)},t.prototype.stopApp=function(t){e.request("app-stop",{app:t})},t.prototype.getId=function(t){e.request("article-id-get",null,t)},t.prototype.getPackageId=function(t){e.request("package-id-get",null,t)},t.prototype.getPackageGuid=function(t){e.request("package-guid-get",null,t)},t.prototype.clearMetaInfo=function(t){e.request("article-metainfo-clear",null,t)},t.prototype.getTags=function(t){e.request("article-tags-get",null,t)},t.prototype.getCustomMeta=function(t,o){e.request("article-custom-meta-get",{name:t},o)},t.prototype.setCustomMeta=function(t,o,n){e.request("article-custom-meta-set",{name:t,value:o},n)},t.prototype.setMetaChanged=function(t){e.request("article-meta-changed",null,t)},t.prototype.setTags=function(t,o,n){e.request("article-tags-set",{save:o,tags:t},n)},t.prototype.addTags=function(t,o,n){e.request("article-tags-add",{tags:t,onError:o},n)},t.prototype.addTag=function(t,o,n){e.request("article-tags-add",{tags:[t],onError:o},n)},t.prototype.addTags=function(t,o,n){e.request("article-tags-add",{tags:t,onError:o},n)},t.prototype.removeTag=function(t,o){e.request("article-tags-remove",{tag:t},o)},t.prototype.getSelectedCategories=function(t){e.request("article-categories-selected-get",null,t)},t.prototype.saveCategories=function(e){this.getSelectedCategories(function(t){this.setCategories(t,e)})},t.prototype.setCategories=function(t,o){e.request("article-categories-selected-set",{categories:t},o)},t.prototype.addCategories=function(t,o){e.request("article-categories-add",{categories:t},o)},t.prototype.removeCategories=function(t,o){e.request("article-categories-remove",{categories:t},o)},t.prototype.setMainCategory=function(t,o){e.request("article-categories-main-set",{category:t},o)},t.prototype.getSource=function(t){e.request("article-source-get",null,t)},t.prototype.setSource=function(t,o){e.request("article-source-set",{source:t},o)},t.prototype.getStatus=function(t){e.request("article-status-get",null,t)},t.prototype.setStatus=function(t,o){e.request("article-status-set",{status:t},o)},t.prototype.getPublishedDatetime=function(t){e.request("article-published-get",null,t)},t.prototype.setPublishedDatetime=function(t,o){e.request("article-published-set",{published:t},o)},t.prototype.getAuthors=function(t){e.request("article-authors-get",null,t)},t.prototype.setAuthors=function(t,o){e.request("article-authors-set",{authors:t},o)},t.prototype.addAuthors=function(t,o){e.request("article-authors-add",{authors:t},o)},t.prototype.removeAuthors=function(t,o){e.request("article-authors-remove",{authors:t},o)},t.prototype.setKeywords=function(t,o){e.request("article-keywords-set",{keywords:t},o)},t.prototype.getKeywords=function(t){e.request("article-keywords-get",null,t)},t.prototype.getCurrentContent=function(t){e.request("article-content-get",null,t)},t.prototype.setCurrentContent=function(t,o){e.request("article-content-set",{content:t},o)},t.prototype.getArticletypeId=function(t){e.request("article-type-get",null,t)},t.prototype.setArticletypeId=function(t,o){e.request("article-type-set",{articletype:t},o)},t.prototype.maximizeAppWindow=function(t,o){var n="editor-pane-close-"+(new Date).getTime();e.request("editor-pane-maximize",{title:t,event:n}),e.eventListeners.removeAll(n),e.eventListeners.add(n,o)},t.prototype.restoreAppWindow=function(t){e.request("restore-app-window",{},t)},t.prototype.getByline=function(t){e.request("article-byline-get",null,t)},t.prototype.setByline=function(t,o,n){e.request("article-byline-set",{save:o,byline:t},n)},t.prototype.setGeolocations=function(t,o){e.request("article-geolocations-set",{geolocations:t},o)},t.prototype.getGeolocations=function(t){e.request("article-geolocations-get",null,t)},t.prototype.getProperties=function(t){e.request("article-properties-get",null,t)},t.prototype.setProperties=function(t,o){e.request("article-properties-set",{properties:t},o)},t.prototype.setProperty=function(t,o,n){var r={};r[t]=o,e.request("article-properties-set",{properties:r},n)},t.prototype.getTopic=function(t){e.request("article-topic-get",null,t)},t.prototype.setTopic=function(t,o){e.request("article-topic-set",{topic:t},o)},new t}})?n.apply(t,r):n)||(e.exports=i)},function(e,t,o){var n,r,i;r=[e,o(0)],void 0===(i="function"===typeof(n=function(e,t){"use strict";function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._listeners={}}return r=e,(i=[{key:"addAll",value:function(e){var o=function(e){return function(t){e(t.data)}};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],i=o(r);t.on(n,i)}}},{key:"add",value:function(e,t){if("function"!==typeof t)throw new Error("not a function");return void 0===this._listeners[e]&&(this._listeners[e]=[]),this._listeners[e].push(t),this._listeners[e].length-1}},{key:"remove",value:function(e,t){void 0!==this._listeners[e]&&void 0!==this._listeners[e][t]&&(this._listeners[e][t]=!1)}},{key:"removeAll",value:function(e){e?this._listeners[e]=[]:this._listeners=[]}},{key:"notify",value:function(e,t){var n=!0;return void 0===this._listeners[e]?n:(this._listeners[e].forEach(function(e){"function"===typeof e&&!1===(t&&t.params&&!0===t.params?e.apply(null,t.data):"object"===o(t)&&null!==t&&"undefined"!==typeof t.data?e(t.data):e(t))&&(n=!1)}),n)}}])&&n(r.prototype,i),u&&n(r,u),e;var r,i,u}();e.exports=r})?n.apply(t,r):n)||(e.exports=i)}])});
//# sourceMappingURL=bundle.min.js.map