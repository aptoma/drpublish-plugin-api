!function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports.PluginAPI=e():t.PluginAPI=e()}(window,function(){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){var n,r,i;r=[t,o(1),o(2),o(3)],void 0===(i="function"===typeof(n=function(t,e,o,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,s=((i=function(){var t={};window.location.search.substr(1).split("&").forEach(function(e){t[e.split("=")[0]]=e.split("=")[1]}),this.DEBUG=!1,this.Version="1.0",this.Editor=null,this.Article=null,this.errorListeners=new n,this.eventListeners=new n,this.appName=t.appName||"",this.jwt=t.jwt||"",this.standAlone=t.standAlone&&"true"===t.standAlone||!1,this.selectedPluginElement=null;var e=this;pm.bind("event",function(t){var o=function(t){return function(e){s.request(t,e)}};return t.data=function t(e){for(var n in e)e.hasOwnProperty(n)&&("object"===r(e[n])&&null!==e[n]&&"function"===e[n].type?e[n]=o(e[n].eventKey):"object"===r(e[n])&&null!==e[n]&&"function"===typeof e[n].map?e[n]=e[n].map(t):"object"===r(e[n])&&null!==e[n]&&(e[n]=t(e[n])));return e}(t.data),"undefined"===typeof(t=e.eventListeners.notify(t.type,t.data))||(!1===t?{abort:!0}:t)},"*")}).prototype.request=function(t,e,o){var n=this;this.DEBUG&&console.info(this.getPluginName()+": Requesting "+t+" from parent with data",e),e||(e={}),"undefined"===typeof o&&(o=null),"number"===typeof e.length&&(e={data:e}),e.src_app=this.getPluginName();var i=function(t,e){var o=Math.floor(1e3*Math.random()),r=t+o+"functioncallback"+(new Date).getTime(),i=function(t,e){return function(){return n.eventListeners.remove(e,e),t.apply(null,arguments)}}(e,r);return n.eventListeners.add(r,i),{type:"function",eventKey:r}};e=function t(e){for(var o in e)if(e.hasOwnProperty(o)){var n=e[o];"function"===typeof n?e[o]=i(o,n):"object"===r(n)&&null!==n&&"function"===typeof n.map?e[o]=n.map(t):"object"===r(n)&&null!==n&&(e[o]=t(n))}return e}(e),pm({target:parent,type:t,data:e,success:o,error:function(t){n.errorListeners.notify(t.type,t)},origin:"*",hash:!1})},i.prototype.openTagCreationDialog=function(t,e){this.request("create-tag",{tag:t},e)},i.prototype.reloadIframe=function(){this.request("app-reload",{app:this.getPluginName()})},i.prototype.getPluginName=function(){return this.appName},i.prototype.getAppName=function(){return this.getPluginName()},i.prototype.setPluginName=function(t){this.appName=t},i.prototype.setAppName=function(t){this.setPluginName(t)},i.prototype.showInfoMsg=function(t){this.request("show-message-info",{message:t})},i.prototype.showWarningMsg=function(t){this.request("show-message-warning",{message:t})},i.prototype.showErrorMsg=function(t){this.request("show-message-error",{message:t})},i.prototype.showLoader=function(t){this.request("show-loader",{message:t})},i.prototype.hideLoader=function(){this.request("hide-loader")},i.prototype.__loadArticleRevision=function(t,e){this.request("load-revision",{revision:t},e)},i.prototype.createTag=function(t,e){this.request("tag-create",{tag:t},e)},i.prototype.searchDrLib=function(t,e){this.request("drlib-search",{query:t.query,access:t.access,secure:t.secure,success:t.success,error:t.error},e)},i.prototype.convertDomToHTML=function(t){if("object"===r(t)&&"function"===typeof t.wrap)return t.wrap("<div>").parent().html();var e=t.cloneNode(!0),o=document.createElement("div");return o.appendChild(e),o.innerHTML},i.prototype.generateArticleUrl=function(t,e){this.request("generate-article-url",{id:t},e)},i.prototype.extendApi=function(t,e,o){var n=this;this.request("extend-api",{group:t,name:e,action:function(t){var e=o(t.data);n.request(t.eventKey,{data:e})}})},i.prototype.callExtendedApi=function(t,e,o,n){this.request("call-extended-api",{group:t,name:e,data:o,callback:n})},i.prototype.getCurrentUser=function(t){this.request("get-current-user",null,t)},i.prototype.getConfiguration=function(t){this.request("get-configuration",null,t)},i.prototype.getDrPublishConfiguration=function(t){this.request("get-drpublish-configuration",null,t)},i.prototype.setConfiguration=function(t,e,o){"boolean"===typeof e?e={onlyPublication:e}:"object"===r(e)&&null!==e||(e={});var n={config:t,onlyPublication:"boolean"===typeof e.onlyPublication&&e.onlyPublication,success:"function"===typeof e.success?e.success:null,error:"function"===typeof e.error?e.error:null};this.request("set-configuration",n,o)},i.prototype.emit=function(t,e){this.request("emit-api-event",{name:t,data:e})},i.prototype.on=function(t,e){this.eventListeners.add(t,e),this.request("on-api-event",{name:t})},i.prototype.increaseRequiredActionCounter=function(t){this.request("increase-required-action-counter",{},t)},i.prototype.decreaseRequiredActionCounter=function(t){this.request("decrease-required-action-counter",{},t)},i.prototype.clearRequiredActionCounter=function(t){this.request("clear-required-action-counter",{},t)},i.prototype.setRequiredActionCounter=function(t,e){this.request("set-required-action-counter",{count:t},e)},i.prototype.create=function(){return new i},i.prototype.createEmbeddedObject=function(t,e){this.request("create-embedded-object",{typeId:t,callback:e})},i.prototype.getEmbeddedObjectTypes=function(t){this.request("get-embedded-object-types",null,t)},i.prototype.giveFocus=function(t,e,o){return"string"===typeof t&&("boolean"!==typeof o&&(o=!0),this.request("give-focus",{pluginName:t,start:o,argument:e}),!0)},i.prototype.hide=function(){return this.request("hide"),!0},i.prototype.createModal=function(t,e){return this.request("create-custom-modal",{content:t,options:e}),!0},i.prototype.updateModal=function(t){return this.request("update-custom-modal",{content:t}),!0},i.prototype.closeModal=function(t){return this.request("close-custom-modal",{destroy:t}),!0},i.prototype.getModalInputs=function(t){this.request("get-custom-modal-inputs",null,t)},i.prototype.confirmAuthenticated=function(){this.request("confirm-authenticated",{pluginName:this.appName})},i.prototype.isStandAlone=function(){return this.standAlone},i.prototype.getJWT=function(){return this.jwt},i.prototype.replaceEditorComponentsExtension=function(t){this.request("replace-editor-components-extension",t)},i.prototype.clearEditorComponentsExtension=function(t){this.request("clear-editor-components-extension",t)},i.prototype.highlightAnnotation=function(t){this.request("highlight-annotation",t)},i.prototype.underemphasizeAnnotations=function(t){this.request("underemphasize-annotations",t)},i.prototype.registerExternallyDefinedProperties=function(t){this.request("register-externally-defined-properties",t)},new i);s.Article=o(s),s.Editor=e(s),t.exports=s})?n.apply(e,r):n)||(t.exports=i)},function(t,e,o){var n,r,i;r=[t],void 0===(i="function"===typeof(n=function(t){"use strict";function e(t){return(e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var o=null,n=function(){this.DEBUG=!1,t.on("pluginElementClicked",function(t){o=t}),t.on("pluginElementDeselected",function(){o=null})};return n.prototype.getActiveEditor=function(e){t.request("get-active-editor",null,e)},n.prototype.registerMenuAction=function(e,o){t.request("register-menu-action",e,o)},n.prototype.registerHoverAction=function(e,o){t.request("register-hover-action",e,o)},n.prototype.getSelectedPluginElement=function(e){t.request("get-selected-plugin-element",{},e)},n.prototype.deSelectPluginElements=function(e){t.request("de-select-plugin-elements",{},e)},n.prototype.directionalCastle=function(e,o,n){t.request("editor-directional-castle",{elementId:e,direction:o},n)},n.prototype.registerMenuActionGroup=function(e,o){t.request("register-menu-action-group",e,o)},n.prototype.getEditorType=function(e){t.request("editor-get-type",null,e)},n.prototype.replaceElementById=function(e,o,n){t.request("editor-element-replace-byid",{id:e,element:o},n)},n.prototype.replacePluginElementById=function(e,o,n){t.request("editor-element-replace-plugin-element-byid",{id:e,element:o},n)},n.prototype.setElementContentById=function(e,o,n){t.request("editor-element-set-byid",{id:e,element:o},n)},n.prototype.deleteElementById=function(e,o){t.request("editor-element-delete-byid",{id:e},o)},n.prototype.getHTMLById=function(e,o){t.request("editor-element-get-byid",{id:e},o)},n.prototype.getHTMLBySelector=function(e,o){t.request("editor-elements-get-byselector",{selector:e},o)},n.prototype.getCategories=function(e){t.request("get-categories",null,e)},n.prototype.getParentCategories=function(e,o){t.request("get-parent-categories",e,o)},n.prototype.getParentIds=function(e,o,n){t.request("get-parent-ids",{id:e,selector:o},n)},n.prototype.getTagTypes=function(e){t.request("get-tag-types",null,e)},n.prototype.getTagType=function(e,o){t.request("get-tag-type",{id:e},o)},n.prototype.clear=function(e){t.request("editor-clear",null,e)},n.prototype.insertString=function(e,o){t.request("editor-insert-string",{string:e},o)},n.prototype.insertElement=function(o,n,r){var i=!1;"object"===e(n)?i="boolean"===typeof(n=n||{}).select&&n.select:"undefined"===typeof r&&"function"===typeof n&&(r=n),t.request("editor-insert-element",{element:o.outerHTML,select:i,options:n},r)},n.prototype.removeClasses=function(e,o,n){t.request("editor-classes-remove",{id:e,classes:o},n)},n.prototype.addClasses=function(e,o,n){t.request("editor-classes-add",{id:e,classes:o},n)},n.prototype.getDataAttribute=function(e,o,n){t.request("editor-attribute-get",{id:e,attribute:"data-"+o},n)},n.prototype.updateDataAttribute=function(e,o,n,r){t.request("editor-attribute-update",{id:e,attribute:"data-"+o,value:n},r)},n.prototype.markAsActive=function(e,o){t.request("editor-mark-as-active",{id:e},o)},n.prototype.setAttributeById=function(e,o,n,r){t.request("editor-element-attribute-set-byid",{id:e,attribute:o,value:n},r)},n.prototype.setStyleById=function(e,o,n,r){t.request("editor-element-style-set-byid",{id:e,attribute:o,value:n},r)},n.prototype.initMenu=function(e,o){t.request("editor-initialize-menu",{menus:e},o)},n.prototype.openPluginElementEditor=function(e){t.request("open-element-editor",{id:e})},n.prototype.getTotalWordCount=function(e){t.request("total-word-count",null,e)},n.prototype.getTotalCharCount=function(e){t.request("total-char-count",null,e)},n.prototype.updateAssetOption=function(e,o,n,r){t.request("update-asset-option",{dpArticleId:e,key:o,value:n},r)},n.prototype.updateAssetData=function(e,o){t.request("update-asset-media",e,o)},n.prototype.getAssetData=function(e,o){t.request("get-asset-data",{data:e},o)},n.prototype.insertNestedAsset=function(e,o,n,r){var i=this;function s(e){t.request("update-embedded-asset",n,e)}t.createEmbeddedObject(n.embeddedTypeId,function(u){!function(e,r,s){n.internalId=e;var u="asset-"+e,a=$("<div />");a.attr("id",u),a.attr("data-internal-id",e),a.attr("data-ah5-type",n.assetSource),n.externalId&&a.attr("data-external-id",n.externalId),n.dpDigitalAssetId&&a.attr("data-dp-digital-asset-id",n.dpDigitalAssetId),n.assetClass&&a.addClass(n.assetClass),a.addClass("dp-plugin-element"),a.html(o),t.Editor.getHTMLById(r,function(t){var e=document.createElement("div");e.innerHTML=t,e.firstChild.setAttribute("id",r+"tmp"),i.replacePluginElementById(r,e.innerHTML,function(){(e=document.createElement("div")).innerHTML=t;var o=e.querySelector(".dp-fact-box-image, .dp-nested-asset-container");n.isMultiple?$(o).append(a.get(0).outerHTML):o.innerHTML=a.get(0).outerHTML,i.replacePluginElementById(r+"tmp",e.innerHTML,s)})})}(u,e,function(t){return s(r)})})},n.prototype.insertEmbeddedAsset=function(e,n,r){var i=this,s=!1;if(o){if(n.assetSource!==t.getAppName())return void t.showErrorMsg("Can't update selected plugin element since it doesn't belong to the '"+t.getAppName()+"' plugin");s=!0}if(o){var u=o.dpArticleId;if(!u)throw Error("Selected plugin element: expected dpArticleId not found (tried reading from attribute 'data-internal-id')");a(u,function(t){return c("function"===typeof r?r(t):null)})}else t.createEmbeddedObject(n.embeddedTypeId,function(t){a(t,function(t){return p("function"===typeof r?r(t):null)})});function a(t,o){n.internalId=t;var r="asset-"+t,u=document.createElement("div");if(u.id=r,u.dataset.internalId=t,n.externalId&&(u.dataset.externalId=n.externalId),n.dpDigitalAssetId&&(u.dataset.dpDigitalAssetId=n.dpDigitalAssetId),n.assetClass&&u.classList.add(n.assetClass),u.innerHTML=e,s?i.setElementContentById(r,u.innerHTML,null):(n.select=!0,i.insertElement(u,n)),"function"===typeof o)return o()}function p(e){t.request("add-embedded-asset",n,e)}function c(e){t.request("update-embedded-asset",n,e)}},n.prototype.getCurrentSelectionAbsolutePosition=function(e){t.request("current-selection-absolute-position",null,e)},n.prototype.wrapSelection=function(e,o,n){t.request("wrap-selection",{className:e,attributes:o},n)},n.prototype.removeInPlace=function(e,o){t.request("remove-in-place",{selector:e},o)},n.prototype.triggerEvent=function(e,o,n){t.request("trigger-event",{selector:e,event:o},n)},n.prototype.getOrderedIDs=function(e,o){t.request("get-ordered-ids",{selector:e},o)},new n}})?n.apply(e,r):n)||(t.exports=i)},function(t,e,o){var n,r,i;r=[t],void 0===(i="function"===typeof(n=function(t){"use strict";t.exports=function(t){var e=function(){this.DEBUG=!1};return e.prototype.focusPlugin=function(e){t.request("app-focus",{},e)},e.prototype.focusApp=function(t){this.focusPlugin(t)},e.prototype.startPlugin=function(e,o,n){t.request("app-start",{app:e,option:o},n)},e.prototype.startApp=function(t,e,o){this.startPlugin(t,e,o)},e.prototype.stopPlugin=function(e){t.request("app-stop",{app:e})},e.prototype.stopApp=function(t){this.stopPlugin(t)},e.prototype.getId=function(e){t.request("article-id-get",null,e)},e.prototype.getPackageId=function(e){t.request("package-id-get",null,e)},e.prototype.getPackageGuid=function(e){t.request("package-guid-get",null,e)},e.prototype.clearMetaInfo=function(e){t.request("article-metainfo-clear",null,e)},e.prototype.getTags=function(e){t.request("article-tags-get",null,e)},e.prototype.getCustomMeta=function(e,o){t.request("article-custom-meta-get",{name:e},o)},e.prototype.setCustomMeta=function(e,o,n){t.request("article-custom-meta-set",{name:e,value:o},n)},e.prototype.setMetaChanged=function(e){t.request("article-meta-changed",null,e)},e.prototype.setTags=function(e,o,n){t.request("article-tags-set",{save:o,tags:e},n)},e.prototype.addTags=function(e,o,n){t.request("article-tags-add",{tags:e,onError:o},n)},e.prototype.addTag=function(e,o,n){t.request("article-tags-add",{tags:[e],onError:o},n)},e.prototype.addTags=function(e,o,n){t.request("article-tags-add",{tags:e,onError:o},n)},e.prototype.removeTag=function(e,o){t.request("article-tags-remove",{tag:e},o)},e.prototype.getSelectedCategories=function(e){t.request("article-categories-selected-get",null,e)},e.prototype.saveCategories=function(t){this.getSelectedCategories(function(e){this.setCategories(e,t)})},e.prototype.setCategories=function(e,o){t.request("article-categories-selected-set",{categories:e},o)},e.prototype.addCategories=function(e,o){t.request("article-categories-add",{categories:e},o)},e.prototype.removeCategories=function(e,o){t.request("article-categories-remove",{categories:e},o)},e.prototype.setMainCategory=function(e,o){t.request("article-categories-main-set",{category:e},o)},e.prototype.getSource=function(e){t.request("article-source-get",null,e)},e.prototype.setSource=function(e,o){t.request("article-source-set",{source:e},o)},e.prototype.getStatus=function(e){t.request("article-status-get",null,e)},e.prototype.setStatus=function(e,o){t.request("article-status-set",{status:e},o)},e.prototype.getPublishedDatetime=function(e){t.request("article-published-get",null,e)},e.prototype.setPublishedDatetime=function(e,o){t.request("article-published-set",{published:e},o)},e.prototype.getAuthors=function(e){t.request("article-authors-get",null,e)},e.prototype.setAuthors=function(e,o){t.request("article-authors-set",{authors:e},o)},e.prototype.addAuthors=function(e,o){t.request("article-authors-add",{authors:e},o)},e.prototype.removeAuthors=function(e,o){t.request("article-authors-remove",{authors:e},o)},e.prototype.setKeywords=function(e,o){t.request("article-keywords-set",{keywords:e},o)},e.prototype.getKeywords=function(e){t.request("article-keywords-get",null,e)},e.prototype.getCurrentContent=function(e){t.request("article-content-get",null,e)},e.prototype.setCurrentContent=function(e,o){t.request("article-content-set",{content:e},o)},e.prototype.setSubArticleContent=function(e,o,n){t.request("sub-article-content-set",{articleId:e,content:o},n)},e.prototype.getArticletypeId=function(e){t.request("article-type-get",null,e)},e.prototype.setArticletypeId=function(e,o){t.request("article-type-set",{articletype:e},o)},e.prototype.maximizePluginWindow=function(e,o,n){var r="editor-pane-close-"+(new Date).getTime();t.request("editor-pane-maximize",{title:e,event:r},n),t.eventListeners.removeAll(r),t.eventListeners.add(r,o)},e.prototype.maximizeAppWindow=function(t,e,o){this.maximizePluginWindow(t,e,o)},e.prototype.restorePluginWindow=function(e){t.request("restore-app-window",{},e)},e.prototype.restoreAppWindow=function(t){this.restorePluginWindow(t)},e.prototype.getByline=function(e){t.request("article-byline-get",null,e)},e.prototype.setByline=function(e,o,n){t.request("article-byline-set",{save:o,byline:e},n)},e.prototype.setGeolocations=function(e,o){t.request("article-geolocations-set",{geolocations:e},o)},e.prototype.getGeolocations=function(e){t.request("article-geolocations-get",null,e)},e.prototype.getProperties=function(e){t.request("article-properties-get",null,e)},e.prototype.setProperties=function(e,o){t.request("article-properties-set",{properties:e},o)},e.prototype.setProperty=function(e,o,n){var r={};r[e]=o,t.request("article-properties-set",{properties:r},n)},e.prototype.getTopic=function(e){t.request("article-topic-get",null,e)},e.prototype.setTopic=function(e,o){t.request("article-topic-set",{topic:e},o)},e.prototype.getPackage=function(e){t.request("package-get",null,e)},new e}})?n.apply(e,r):n)||(t.exports=i)},function(t,e,o){var n,r,i;r=[t,o(0)],void 0===(i="function"===typeof(n=function(t,e){"use strict";function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._listeners={}}return r=t,(i=[{key:"addAll",value:function(t){var o=function(t){return function(e){t(e.data)}};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],i=o(r);e.on(n,i)}}},{key:"add",value:function(t,e){if("function"!==typeof e)throw new Error("not a function");return void 0===this._listeners[t]&&(this._listeners[t]=[]),this._listeners[t].push(e),this._listeners[t].length-1}},{key:"remove",value:function(t,e){void 0!==this._listeners[t]&&void 0!==this._listeners[t][e]&&(this._listeners[t][e]=!1)}},{key:"removeAll",value:function(t){t?this._listeners[t]=[]:this._listeners=[]}},{key:"notify",value:function(t,e){var n=!0;return void 0===this._listeners[t]?n:(this._listeners[t].forEach(function(t){"function"===typeof t&&!1===(e&&e.params&&!0===e.params?t.apply(null,e.data):"object"===o(e)&&null!==e&&"undefined"!==typeof e.data?t(e.data):t(e))&&(n=!1)}),n)}}])&&n(r.prototype,i),s&&n(r,s),t;var r,i,s}();t.exports=r})?n.apply(e,r):n)||(t.exports=i)}])});
//# sourceMappingURL=bundle.min.js.map