<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>DocStrap Source: Listeners.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cosmo.css">

</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top navbar-inverse">
		<div class="navbar-inner">
			<a class="brand" href="index.html">DocStrap</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="module-AppApi.html">AppApi</a>
						</li>
						
						<li>
							<a href="Article.html">AppAPI/Article</a>
						</li>
						
						<li>
							<a href="Editor.html">AppAPI/Editor</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#Listeners">Listeners</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: Listeners.js</h1>
    
<section>
	<article>
		<pre
			class="sunlight-highlight-javascript linenums">/* global AppAPI: true */
/**
 * @example
 * AppAPI.on('afterCreate', function() {
 *     AppAPI.Article.setSource('Ny Times');
 * });
 * AppAPI.on('beforeSave', function() {
 *     if (!articleIsAwesome()) {
 *          return false;
 *     }
 * });
 *
 * @description
 *
 * DrPublish provides a large set of default events that an app can listen for. All events that start their name with 'before' can be stopped by an app. This is done by returning 'false' from the callback function, as in the 'beforSave' example given bellow. 
 *
 * Other apps can also supply their own events using the AppAPI.emit(...) function. Documention on these events are up to each app to create.
 *
 * *Available events are:*
 *
 *  `addCategory`
 *  > _triggered after a category has been added to the article_
 *
 *  `addTag`
 *  > _triggered after a tag had been added to the article_
 *
 *  `appPaneMaximized`
 *  > _triggered when the app pane is maximized_
 *
 *  `appPaneRestored`
 *  > _triggered when the app pane is restored to its' original size_
 *
 *  `appAuthenticated`
 *  > _triggered when an app has been authenticated_
 *
 *  `changedCustomMeta`
 *  > _triggered when a custom meta property is changed/set, parameter is an object with property name and value_
 *
 *  `receivedFocus`
 *  > _triggered when a plugin receives focus. Receives a parameter object that has two predefined values: `previousPluginName` - name of previous plugin, `givenFocus` - true when focus was sent from another plugin. The parameter object can also contain other keys supplied by the plugin losing focus._
 *
 *  `afterCreate`
 *
 *  `beforeDelete`
 *
 *  `afterDelete`
 *
 *  `afterLoad`
 *
 *  `afterPublish`
 *
 *  `afterSave`
 *
 *  `beforeCreate`
 *
 *  `beforeLoad`
 *
 *  `beforePreview`
 *
 *  `beforeSave`
 *
 *  `beforePublish`
 *
 *  `editorFocus` 
 *  > _triggered when an editor gets focus_
 *
 *  `editorUnfocus` 
 *  > _triggered when an editor loses focus_
 *
 *  `editorsLostFocus` 
 *  > _triggered when all editors loses focus_
 *
 *  `editorReady`
 *
 *  `modifiedContent`
 *
 *  `elementRemoved`
 *  > _triggered when a plugin element from the current plugin is removed, receives an object with element id as a parameter_
 *
 *  `pluginElementClicked`
 *
 *  `pluginElementSelected`
 *
 *  `pluginElementDeselected`
 */
function Listeners () {
    "use strict";
	this._listeners = {};
}

/**
 * @deprecated Use AppAPI.on(...) instead
 */
Listeners.prototype.addAll = function(listeners) {
    "use strict";
    var createCallback = function(callback) {
        return function(data) {
            callback(data.data);
        };
    };
    for (var eventName in listeners) {
        if (listeners.hasOwnProperty(eventName)) {
            var callback = listeners[eventName];
            var callWrapper = createCallback(callback);
            AppAPI.on(eventName, callWrapper);
        }
    }
};

/**
 * Adds a new listener
 *
 * @param {String} event Event name
 * @param {Function} callback Function to call when an even of the type is received
 */
Listeners.prototype.add = function(event, callback) {
    "use strict";

	if (this._listeners[event] === undefined) {
		this._listeners[event] = [];
	}

	this._listeners[event].push(callback);
	return this._listeners[event].length - 1;
};

/**
 * Removes the listener at the given index
 *
 * @param {String} event Event type
 * @param {Function} index The index of the event handler to remove
 */
Listeners.prototype.remove = function(event, index) {
    "use strict";

	if (this._listeners[event] === undefined || this._listeners[event][index] === undefined) {
        return;
    }

	/*
	 * Set to null instead of remove to retain callback indexes
	 */
	this._listeners[event][index] = false;
};

/**
 * Removes all listeners for the given event type, or if !event then removes all listeners
 *
 * @param {String} event Event type to remove handlers for (!event for all)
 */
Listeners.prototype.removeAll = function(event) {
    "use strict";
	if (!event) {
		this._listeners = [];
	} else {
		this._listeners[event] = [];
	}
};

/**
 * Notifies all registered listeners that an event has occurred
 *
 * @param {String} event Event type
 * @param {Object} data The event data
 */
Listeners.prototype.notify = function(event, data) {
    "use strict";
    var returnValue = true;
	if (this._listeners[event] !== undefined) {
		jQuery.each(this._listeners[event], function(i, e) {
			if (e && typeof e === "function") {
				if (data && data.params && data.params === true) {
					var r = e.apply(null, data.data);

					if (r === false) {
						returnValue = false;
					}

				} else if (e(data) === false) {
                    returnValue = false;
                }
			}
		});
	}
	return returnValue;
};
</pre>
	</article>
</section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					
		<span class="copyright">
		DocStrap Copyright Â© 2012-2014 The contributors to the JSDoc3 and DocStrap projects.
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a>
		on Tue Dec 9th 2014 using the <a
			href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<!--<script src="scripts/sunlight.js"></script>-->
	<script src="scripts/docstrap.lib.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>

	<script>
		$( function () {
			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );

			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "100px"
			} );

			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			$( '.dropdown-toggle' ).dropdown();
//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

			$( ".tutorial-section pre, .readme-section pre" ).each( function () {
				var $this = $( this );

				var example = $this.find( "code" );
				exampleText = example.html();
				var lang = /{@lang (.*?)}/.exec( exampleText );
				if ( lang && lang[1] ) {
					exampleText = exampleText.replace( lang[0], "" );
					example.html( exampleText );
					lang = lang[1];
				} else {
					lang = "javascript";
				}

				if ( lang ) {

					$this
						.addClass( "sunlight-highlight-" + lang )
						.addClass( "linenums" )
						.html( example.html() );

				}
			} );

			Sunlight.highlightAll( {
				lineNumbers : true,
				showMenu : true,
				enableDoclinks : true
			} );
		} );
	 </script>



	<!--Navigation and Symbol Display-->
	


	<!--Google Analytics-->
	

</body>
</html>
