<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Listeners.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: Listeners.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * Will hold a list of listeners that are created and should be notified on events
 */
function Listeners () {
	this._listeners = [];
}

/**
 * Adds several listeners
 *
 * Example: &lt;code>
 * var l = new Listeners;
 * l.addListeners ( {
 *	afterCreated: function() {
 *		DP.Article.setSource('Ny Times');
 *	},
 *	beforeSave: function() {
 *		return confirm('Sure you wanna save?');
 *	}
 * });
 * &lt;/code>
 *
 * @param {Object} events A list of callbacks that should be called on events
 * @returns {Object} A dictionary of events => listener ID for later removal
 */
Listeners.prototype.addAll = function ( events ) {

	var out = {};
	for ( event in events ) {
		out[event] = this.add ( event, events[event] );
	}

	return out;
};

/**
 * Adds a new listener
 *
 * @param {String} event Event name
 * @param {Function} callback Function to call when an even of the type is received
 */
Listeners.prototype.add = function ( event, callback ) {

	if ( this._listeners[event] == undefined ) {
		this._listeners[event] = [];
	}

	var index = this._listeners[event].length;
	this._listeners[event][index] = callback;
	return index;
};

/**
 * Removes the listener at the given index
 *
 * @param {String} event Event type
 * @param {Function} index The index of the event handler to remove
 */
Listeners.prototype.remove = function ( event, index ) {

	if ( this._listeners[event] == undefined ) return;
	if ( this._listeners[event][index] == undefined ) return;

	/*
	 * Set to null instead of remove to retain callback indexes
	 */
	this._listeners[event][index] = false;
};

/**
 * Removes the first matching listener by callback lookup (if you don't have the index)
 *
 * @param {String} event Event type
 * @param {Function} callback Function originally bound to event type
 * @returns {Boolean} Whether a handler was removed
 */
Listeners.prototype.removeByCallback = function ( event, callback ) {

	$.each ( this._listeners[event], function ( i, e ) {

		if ( e == callback ) {
			this.remove ( event, i );
			return true;
		}
	} );

	return false;
};

/**
 * Removes all listeners for the given event type, or if !event then removes all listeners
 *
 * @param {String} event Event type to remove handlers for (!event for all)
 */
Listeners.prototype.removeAll = function ( event ) {

	if ( !event ) {
		this._listeners = [];
	} else {
		this._listeners[event] = [];
	}
};

/**
 * Notifies all registered listeners that an event has occurred
 *
 * Each listener should return the incoming data (modified if necessary)
 *
 * @param {String} event Event type
 * @param {Object} data The event data
 */
Listeners.prototype.notify = function(event, data) {
	if (this._listeners[event] != undefined) {
		jQuery.each (this._listeners[event], function (i, e) {
			if (e && typeof e === "function") {
				data = e(data);
			} else {
				//console.debug('hmm', e);
		}
		});
	}
	return data;
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="AH5Communicator.html">AH5Communicator</a></li><li><a href="AppAPI.html">AppAPI</a></li><li><a href="ArticleCommunicator.html">ArticleCommunicator</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Listeners">Listeners</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Tue Apr 02 2013 13:31:40 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
</body>
</html>
